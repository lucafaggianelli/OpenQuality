<h4 ng-show="newDefect">New Defect</h4>
<h4 ng-show="!newDefect">#{{defect.id}} {{defect.name}}</h4>

<form id="defect-detail">
    <div class="form-group">
        <label class="control-label">Description</label>
        <div contenteditable="true" ng-model="defect.description"></div>
    </div>

    <div class="form-group">
        <label class="control-label">Comments</label>
        <div ng-bind-html-unsafe="defect['dev-comments']"></div>
    </div>

    <div class="form-group">
        <label class="control-label">Detected in</label>
        <div>{{defect["detection-version"]}} on {{defect["creation-time"]}} by {{defect["detected-by"]}}</div>
    </div>

    <div class="form-group">
        <label class="control-label">Owner</label>
        <select ng-model="defect.owner" class="users-dropdown">
            <option ng-repeat="u in Users.users" value="{{u.id}}">{{ u.fullname }}</option>
        </select>
    </div>

    <div class="form-group">
        <label class="control-label">Status</label>
        <select name="status" class="form-control" ng-model="defect.status"
                ng-options="status for status in statuses">
        </select>
    </div>

    <div class="form-group" ng-show="defect.status == 'Fixed'">
        <label class="box-label">Fixed in build</label>
        <input class="form-control" ng-model="defect['user-46']" />
    </div>

    <div class="form-group">
        <label class="control-label">Resolution note</label>
        <div contenteditable="true" ng-model="defect['user-63']"></div>
    </div>

    <div class="form-group" ng-show="attachments">
        <label class="control-label">Defect Attachments</label>
        <li ng-repeat="attachment in attachments">
            <a href="{{attachment.url}}" download>{{attachment.name}}</a>
        </li>
    </div>

    <div class="alert alert-danger" ng-show="errorMessage">{{errorMessage}}</div>
    <button ng-show="!newDefect" ng-click="save()" class="ng-class: saveEnabledClass(); btn btn-primary">Save</button>
    <button ng-show="newDefect" ng-click="create()" class="ng-class: saveEnabledClass(); btn btn-primary">Create</button>
</form>
